"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function setDeviceType(){!function(){isDesktop=$(window).width()>1024}(),function(){isTablet=$(window).width()<=1024&&$(window).width()>=768}(),function(){isMobile=$(window).width()<768}()}function setPageName(){pageName=$("template").html().toString().trim()}function initAnimationsArray(e){addDataDelayAttr(e),$(window).on("scroll",function(){triggerSwipeDownAnimation(e)})}function addDataDelayAttr(e){e.forEach(function(e){$(e).length>0&&$(e).each(function(e,t){$(t).attr("data-delay",100*e)})})}function triggerSwipeDownAnimation(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e.forEach(function(e){$(e).length>0&&$(window).scrollTop()>$(e).offset().top-t&&$(e).each(function(e,t){setTimeout(function(){$(t).addClass("animated")},$(t).attr("data-delay"))})})}function isIE(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var t=navigator.userAgent,n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return-1===e?!1:!0}function initModel(e){function t(){o=new THREE.Scene,i=new THREE.PerspectiveCamera(40,$(e).width()/$(e).height(),1,5e3),i.rotation.y=.25*Math.PI,i.position.x=1e3,i.position.y=400,i.position.z=1e3,a=new THREE.AmbientLight(11776947,100),o.add(a);var t=new THREE.DirectionalLight(7566195,50);t.position.set(0,1,0),t.castShadow=!0;var c=new THREE.PointLight(11838612,5);c.position.set(-500,300,0),o.add(c);var l=new THREE.PointLight(11838612,7);l.position.set(0,0,6e3),o.add(l),r=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),r.setSize(window.innerWidth,window.innerHeight),r.setClearColor(0,0),document.querySelector(e).appendChild(r.domElement);var d=new THREE.GLTFLoader;d.load("../vendors/js/mushroom.glb",function(e){s=e.scene.children[0],s.scale.set(180,180,180),o.add(e.scene),n()})}function n(){requestAnimationFrame(n),s.rotation.z+=.002,r.render(o,i)}var o,i,r,a,s=null;t()}function stopScroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",t=parseInt(document.documentElement.clientWidth),n=parseInt(window.innerWidth),o=n-t;$(e).attr("style","overflow: hidden; padding-right: "+o+"px")}function freeScroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";$(e).attr("style","")}function initAOS(){AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:200,delay:0,duration:600,easing:"ease-out",once:!0,mirror:!1,anchorPlacement:"top-bottom"})}function createNav(e){return{prevNav:'<svg class="nav-arrow nav-arrow--'.concat(e,' nav-arrow--prev" width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="48" cy="48" r="47" stroke="#5C8741" stroke-width="2"/>\n                    <path d="M39.2929 47.2929C38.9024 47.6834 38.9024 48.3166 39.2929 48.7071L45.6569 55.0711C46.0474 55.4616 46.6805 55.4616 47.0711 55.0711C47.4616 54.6805 47.4616 54.0474 47.0711 53.6569L41.4142 48L47.0711 42.3431C47.4616 41.9526 47.4616 41.3195 47.0711 40.9289C46.6805 40.5384 46.0474 40.5384 45.6569 40.9289L39.2929 47.2929ZM56 47H40V49H56V47Z" fill="#5C8741"/>\n                </svg>'),nextNav:'<svg class="nav-arrow nav-arrow--'.concat(e,' nav-arrow--next" width="97" height="96" viewBox="0 0 97 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="48.0195" cy="48" r="47" stroke="#5C8741" stroke-width="2"/>\n                    <path d="M56.7071 48.7071C57.0976 48.3166 57.0976 47.6834 56.7071 47.2929L50.3431 40.9289C49.9526 40.5384 49.3195 40.5384 48.9289 40.9289C48.5384 41.3195 48.5384 41.9526 48.9289 42.3431L54.5858 48L48.9289 53.6569C48.5384 54.0474 48.5384 54.6805 48.9289 55.0711C49.3195 55.4616 49.9526 55.4616 50.3431 55.0711L56.7071 48.7071ZM40 49L56 49L56 47L40 47L40 49Z" fill="#5C8741"/>\n                </svg>')}}function showMenu(e){$(e).addClass("active"),stopScroll()}function hideMenu(e){$(e).removeClass("active"),freeScroll()}function initMap(e){e.split(",");$("#map").html(""),ymaps.ready(function(){var t=new ymaps.Map("map",{center:e.split(","),zoom:18,controls:[]},{searchControlProvider:"yandex#search"}),n=new ymaps.Placemark(e.split(","),{},{iconColor:"#d32f2f"});t.geoObjects.add(n),t.container.fitToViewport()})}function truncText(e,t){$(e).length>0&&$(e).each(function(e,n){var o="";$(n).text().trim().length>t&&(o=$(n).text().trim().substr(0,t-1)+"…",$(n).text(o))})}function initSlider(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={loop:!1,dots:!1,nav:!0,lazyLoad:!0,smartSpeed:600};$(e).length>0&&$(e).owlCarousel(_objectSpread(_objectSpread({},n),t))}function showSuccessModal(e){var t=$(e).closest(".modal"),n=t.find(".modal__content"),o=function(e,t){return{height:t,width:e,display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},i="".concat(n.innerHeight(),"px"),r="".concat(n.innerWidth(),"px"),a="".concat(t.find('button[type="submit"]').innerWidth(),"px");n.fadeOut(400,function(){t.find(".success").css(o(r,i)),t.find(".success__btn").css("width",a)}),$(t).on("click",function(e){$(e.target).hasClass("modal")&&setTimeout(function(){t.find(".success").css("display","none"),n.show()},500)}),$(".success__btn, .modal__close").on("click",function(){$(this).closest(".modal").removeClass("active"),setTimeout(function(){t.find(".success").css("display","none"),n.show(),freeScroll()},500)})}function sendForm(e,t,n,o,i,r,a){console.log(a),e.preventDefault(),formValidate(_objectSpread({form:t,url:n,onLoadStart:function(){return r?r():function(){}},onSuccess:function(e){return o?o(e):function(){}},onError:function(e){return i?i(e):console.log(e)}},a))}function showFeedbackScreen(e){var t=e.closest(".feedback__item"),n=t.attr("data-screen"),o=$(".full-feedback .modal__box");$(".full-feedback img").attr("src",n),isDesktop&&o.css({position:"absolute",top:"calc(".concat(t.offset().top-$(window).scrollTop(),")px"),left:"".concat(t.offset().left+t.width()/8,"px")})}function initListeners(){if($(".burger").on("click",function(){showMenu(isDesktop?".menu":".mobile-menu")}),$(".menu__close").on("click",function(){hideMenu(".menu")}),$(".mobile-menu__close").on("click",function(){hideMenu(".mobile-menu")}),$(".menu__product").on("mouseenter",function(){$(this).siblings().removeClass("active"),$(this).addClass("active"),$(".menu__products-pic").css("background-image","url(".concat($(this).attr("data-pic"),")"))}),$(".enter__form").on("submit",function(e){var t=this;sendForm(e,".enter__form","https://cors-anywhere.herokuapp.com/http://mushrooms.asap-lp.ru/form.php",function(){return showSuccessModal($(t))})}),$(".register__form").on("submit",function(e){var t=this;sendForm(e,".register__form","https://cors-anywhere.herokuapp.com/http://mushrooms.asap-lp.ru/form.php",function(){return showSuccessModal($(t))})}),$(".write__form").on("submit",function(e){var t=this;sendForm(e,".write__form","https://cors-anywhere.herokuapp.com/http://mushrooms.asap-lp.ru/form.php",function(){return showSuccessModal($(t))})}),$(".shops__map").on("click",function(){initMap($(this).attr("data-coords"))}),initSlider(".recipes .recipes__slider",{items:3,navText:[createNav("recipes").prevNav,createNav("recipes").nextNav],navContainer:$(".recipes__nav"),margin:40,responsive:{0:{items:1,margin:8},490:{items:2},1200:{items:3}}}),initSlider(".news__slider",{items:3,navText:[createNav("news").prevNav,createNav("news").nextNav],navContainer:$(".news__nav"),margin:40,responsive:{0:{items:1,margin:8},768:{items:2,margin:30},1024:{margin:40}}}),initSlider(".docs__slider",{items:3,navText:[createNav("docs").prevNav,createNav("docs").nextNav],navContainer:$(".docs__nav"),margin:40,autoWidth:!0,responsive:{0:{items:1,margin:8,autoWidth:!1},490:{items:2},768:{items:3,autoWidth:!0},1400:{margin:40}}}),$(".cooperation-request__form").on("submit",function(e){var t=this;sendForm(e,".cooperation-request__form","https://cors-anywhere.herokuapp.com/http://mushrooms.asap-lp.ru/form.php",function(){return showSuccessModal($(t))})}),$(".feedback__item-original").on("click",function(){showFeedbackScreen($(this))}),isDesktop){if("Главная"===pageName){isIE()||initModel(".eco__model");var e=500;$(window).on("scroll",function(){$(window).scrollTop()>$(".eco__item:eq(1)").offset().top-e&&$(".eco__table-container").addClass("second"),$(window).scrollTop()>$(".eco__item:eq(2)").offset().top-e&&$(".eco__table-container").addClass("third")})}"404"==pageName&&(isIE()||initModel(".notfound__model"))}if(isMobile||(initAnimationsArray([$(".production__slide-box"),$(".production__slide-title"),$(".recipes__slide"),$(".present__item"),$(".shops__item"),$(".features__item"),$(".news__slide"),$(".supplies__item-box"),$(".docs__slide"),$(".recipe__ingredient"),$(".feedback__item-box")]),initSlider(".production__slider",{items:3,navText:[createNav("production").prevNav,createNav("production").nextNav],navContainer:$(".production__nav"),margin:40,responsive:{0:{items:2},1024:{items:3}}})),!isDesktop){initSlider(".present__table",{items:2.3,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2}}}),initSlider(".other-recipes .recipes__slider",{items:2,nav:!1,margin:15,responsive:{0:{items:1,margin:8},490:{items:2,margin:15}}});var t=$(".contacts__title").detach();$(".contacts__contacts").prepend(t)}isTablet&&truncText(".feedback__item-text",170),isMobile&&(truncText(".recipes__slide-text",75),truncText(".feedback__item-text",150))}var isDesktop,isTablet,isMobile=!1,animationsArray=[],pageName="",contentFadeInOnReady=function(){$(".preloader").fadeOut(150,function(){$(".preloader").remove()})},bindModalListeners=function(e){e.forEach(function(e){var t=$(e.trigger),n=$(e.modal);t.on("click",function(e){e.preventDefault(),$(".modal").removeClass("active"),stopScroll("body"),n.addClass("active")}),n.on("click",function(e){$(e.target).hasClass("modal")&&($(this).removeClass("active"),freeScroll())}),n.find(".modal__close").on("click",function(){n.removeClass("active"),freeScroll()}),$(document).keydown(function(e){return 27===e.keyCode?($(".modal").removeClass("active"),freeScroll(),!1):void 0})})};$().ready(function(){contentFadeInOnReady(),setDeviceType(),setPageName(),initListeners(),initAOS(),bindModalListeners([{trigger:".shops__map",modal:".modal--map"},{trigger:".present__item-btn",modal:".modal--enter"},{trigger:".request__request-btn",modal:".cooperation-request"},{trigger:".mobile-menu__account",modal:".modal--enter"},{trigger:".enter__register",modal:".register"},{trigger:".register__enter",modal:".enter"},{trigger:".footer__write",modal:".write"},{trigger:".feedback__item-original",modal:".full-feedback"}]),truncText(".recipes__slide-text",200),truncText(".news__slide-title",70),truncText(".feedback__item-text",300)});